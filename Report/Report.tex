\documentclass{article}
\usepackage{graphicx}
\usepackage[nottoc,numbib]{tocbibind}
\usepackage[a4paper, total={6in, 8in}]{geometry}
\usepackage{subcaption}
\newcommand{\myparagraph}[1]{\paragraph{#1}\mbox{}\\}
 
\usepackage{xcolor}
\newcommand{\highlight}[1]{\colorbox{yellow!50}{$\displaystyle#1$}}


\title{Evolutionary Computation}
\author{Y1481702}
\date{\today}
\setlength\parindent{0pt}
 
\begin{document}
%FONT MUST BE SIZE 12 ARIAL.
%Margin must be MIN 2cm

\begin{titlepage}
\maketitle
\tableofcontents
\end{titlepage}

% Submit Code, 5 marks
% Must be a 'good final solution' and run on a test set

%\section{Abstract} %Unmarked - is it necessary?


% 15 marks
\section{Introduction} 
% Well written and clear 
% Connects well with the literature and provides relevant references
% Demonstates synthesis of the literature
% Demonstates critical ability
% Makes the problem and challenges clear
% Highlights the approach that will be used and justifies it


\subsection{Background}
Biomimicry, the imitation of nature for solving human problems has produced many examples of world class design. 
Some great examples of Biomimicry are Velcro(R), self-cleaning paints and Shinkansen high-speed trains\cite{biomimicry}. In particular these examples imitate the form of nature's physical systems. Since the term biomimicry was first coined in 1997, this design philosophy has started to inspire new developments in various subjects such as the circular economy in product design[CITE] as well as several pieces of ongoing work in Computer Science such as swarm robotics[CITE].
\\\\
%TALK ABOUT THE BENEFITS OF BIOMIMICRY
Life has been around on earth for 3.8 billion years, this is a lot of R\&D time to produce useful solutions which can be related to many of the current problems in various fields[CITE, VOX video].
\\\\
Clearly Evolutionary Computation is an optimisation process inspired by nature in this way.
%Relate this back, why does EVCO benefit from biomimicry.

%Excerpt from Biomimicry: This "hill climbing" in a landscape of possibilities towards an optimal design is what engineers do, but computers can generate random ideas much faster than most engineers. And computers, not yet able to feel embarassment or peer pressure, are not afraid to try off-the-wall ideas. Ideas are just ideas; the more the merrier. page 209

\subsection{DEAP}
\textbf{D}istributed \textbf{E}volutionary \textbf{A}lgorithms in \textbf{P}ython (DEAP) is an open source framework for Python\cite{deap}. The framework aims to provide tools for quickly producing custom evolutionary algorithms. It provides a large amount of in-built functionality for implementing commonly used evolutionary algorithms and allows for parts of these to be mixed and matched as well as intermixed with custom sections.

\subsection{EC for Snake}
The task given is to create an evolutionary algorithm in Python using the DEAP frameowrk in order to play the classic video game, Snake. This is not a new task and has been the subject of previous work including an ...\cite{snake_blog} and more recently a ...\cite{snake_paper}. Despite this there is still room for further work, due to ongoing research into evolutionary computing and significant challenges because of the nature of the game.
\\\\
There are a variety of available instances of Snake with an array of different rules. In this case, there is a square game board of 14x14 cells as shown in Figure. \ref{fig:game_board}. The snake will continously move forwards in the direction it is facing, which can be changed by the user at any time. The aim is to collect food that appears in a random cell on the board when the previous one is eaten. Each time the snake eats a piece of food, it grows and takes up an extra cell. Once the snake fills every cell it can no longer grow. Hence, the highest possible score (185) is equal to the number of cells (196) less the initial length of the snake (11).
\\\\
%difficulties around the game that might cause issues
%PROBLEMS WITH THE TASK (SNAKE) in particular
Implementing this task will involve facing all of the usual challenges in evolutionary computation such as maintaining diversity and reducing bloat. Snake also brings along new challenges. The random placement of the food on the board adds an element of stochasticity to the solution meaning algorithm will perform differently across multiple runs and care will need to be taken to ensure that it works in the general case. The solution will also need to balance the need for the snake to avoid crashing into walls or itself while still picking up the food before time runs out. Optimising both of these objectives at the same time might be difficult.

%general overview of the problems that will be discussed in the next section
%challenges that might be faced in this task
%GENERAL TASKS WITH GENETIC PROGRAMMING
Starter sensing functions are given that tell the snake if there is a wall, itself or food directly ahead

\section{Methods} %[35 marks..!]
% Quality of the design of the algorithm (e.g. choice of representation, fitness
% assessment, other details) to produce a snake AI. Give full details of the algorithm
% choices. Your should provide details and good rationale for your choices.

\subsection{Representation}
% Discussion of Genotype vs Phenotype mapping, or if traits are 1:1
\subsubsection{Available Options}
%LECTURE: 'Representation of the problem (encoding) can help to better understand the landscape of the problem.'
%Representation can significantly affect the size of the search space and thus the time needed to search it
%Compresses the model and thus it requires less storage space, this is good because..?
The representation links the original problem to the search space over which the algorithm runs. As such, the type of representation chosen can significantly affect the size of the search space and by extension, the time needed to search it. 

%Thoughts- obviously don't want to loose too much detail by having a representation that is TOO abstract -this will lead to bad solutions- CITATION NEEDED

\myparagraph{Genetic Algorithms (GA)}
GAs are perhaps the most commonly used form of evolutionary algorithm. They are generally used for optimisation problems but have been applied to a variant of the snake game before\cite{snake_paper}. In this case, the GA was used to optimise four parameters (smoothness, space, food and direction) which determined the snake's movement.

\myparagraph{Evolutionary Strategy (ES)}


\myparagraph{Genetic Programming (GP)}
The aim of GP is to evolve programs that can be used to solve a problem. Clearly this is immediately more relevant for our snake implementation, the aim would be to create a program that can be run to determine our next move given the current state. GP uses a tree representation for programs, where the internal nodes are functions and the leaf nodes of the tree are constants and variables.
\\
GP has previously been explored by Ehlis\cite{snake_blog} and produced some promising results. Different function sets have been explored as well as a technique called priming which... [what is this?].

\myparagraph{Neuroevolution}
Neuroevolution is a hybrid technique between evolutionary computing and artificial neural networks (ANN).
Unfortunately as the brief requires that the DEAP Python library is used, neuroevolution is not an available option as DEAP does not support it.

Grammatical Evolution? Is this explicitly supported in DEAP?\cite{deap}
%DEAP is a requirement, so if this is not support, this is a valid reason to reject it.. however it can be mentioned in further work below!
DEAP's transparency allows virtually any algorithm to be implemented but it's easier to use the built in structures.

%Does the number of functions (primitives) affect the algorithm's performance?
%CITATIONS?


\subsubsection{Choice and Justification}
Genetic Programming will be used as it most closely fits the aims set out in the introduction above. The sensing functions can be used for the 

Typing? Strong/Weak?

\subsubsection{Physical Environments}
%Textbook: An important category of GP applications arises in contexts where executing a given expression changes the environment.
% ... THIS IS THE CASE IN SNAKE? See textbook Chap 6.10

%Which additional sensing functions (if any) have been implemented?
Additional functions may help the snake to find a better solution, however we need to be careful of overparameterising the problem.
This is a common trade-off in many forms of machine learning?

\subsubsection{Initialisation Procedure}
%Full/Grow/Ramped Half and Half?

\subsection{Population}
\subsubsection{Size}
In almost all EA applications the population size is constant\cite[pp.20]{textbook}
The size of the population can also affect the algorithm's performance. If the population size is too small it may not be exploring enough of the search space to contain any good solutions. It will then require a large amount of mutation to find any good solutions creating a very unstable solution. If the population size is too large it will take a lot of time to evaluate and select potential parents.
%Population Size? A trade off-
%too big.. problems?

%too small.. problems?

%fixed size or not? <--- probably, but WHY?! "In almost all EA applications the population size is constant and does not change during the evolutionary search." - Textbook WHY WHY WHY WHY?!?!?!! - citation needed
%easier to encode in an array? <- not if size of individuals might grow?

\subsection{Diversity}
Within this evolutionary computation task, each individual of the population corresponds to a point in the search space of all possible programs. %a section of the search space that is showing promising results
Diversity corresponds to having these points reasonably spread out throughout this space. A diverse population is, by definition, exploring more of this search space than one that is not. %CONSIDER PHRASING
%Can this be related back to k-nearest vs least-squares? Other machine learning problems

\subsection{Evaluation}
%Multiple objectives?
%keep snake alive
%get more food!
Implementing a good fitness evaluation function is essential to evolving a solution to this problem. Without this, there will be no way to assess individuals in order to determine which will survive and reproduce. While there are two major objectives at play in the game, avoiding crashing the snake and getting to the food before the timer hits zero, these can be represented by the final size of the snake when the game ends. As such, we can simply consider this a single-objective problem where the objective is produce the maximum length of snake before either the snake crashes or the timer hits zero. This significantly simplifies the problem with minimal impact.
\\\\
The snake's food spawns randomly around the board. This element of stochasticity makes evaluating the fitness of a particular solution more difficult. The fitness of a given algorithm will likely change between games. In order to ensure a fairer representation of fitness, each solution will need to be evaluated across multiple games.
%DETAIL.. how many games, how can we make this fair?
%Is each point worth the same?
	%do we want to incentivise consistently good scores or flukes?

\subsection{Parent Selection}
%How do we pick which individuals continue?
Selecting which individuals should have influence over the next generation is one of the most important factors for success in Evolutionary Computing. If only the best individuals are selected then diversity will be lost, the algorithm will get stuck in a local minima and be unable to find a good general solution. This is known as premature convergence. If too many of the less-promising solutions are selected then the algorithm may be unstable meaning good solutions will take too long to find and may be lost quickly. Striking a good balance between a diverse population and a stable algorithm is necessary for success in this task.

In biological evolution, old generations die to free up resources for newer generations.
Disregarding solutions due to age ... %good or bad? diversity, other measures?

% Losing good individuals? Hall of Fame/Elitism
Parent Selection can be random, so (if this is the case) good solutions may well die out. Elitism can be used to ensure that the best solution isn't randomly removed from the population. If no better solution is ever found, this solution will want to be present in the final population once evolution is complete.
%Does this have a positive/negative effect

%Roulette Wheel vs Tournament

\subsubsection{Maintaining Diversity}
% Don't want to get stuck in a local optimum
% Why is this a problem?
%Textbook: 'Premature convergence is the well-known effect of losing population diversity too quickly and getting trapped in a local optimum.'
Diversity is difficult to quantity in an objective manner and, as such, no single measure for it exists. A range of different measures including the number of different fitness values, number of different phenotypes/genotypes or entropy may be used\cite{textbook}.

\myparagraph{Roulette Wheel}


\myparagraph{Tournament}
\label{tournament}


\subsubsection{Bloat}% How we work to prevent this,
Bloat, the increase of the size of a genetic program without significant increase in fitness, is a difficult problem to overcome. Bloat is linked to, but different from, overfitting, a common problem in many forms of machine learning\cite{overfitting_bloat}. %talk about this more?

Controlling bloat while maximising fitness turns the evolution into a multi-objective optimisation problem. The two most commonly used solutions to bloat are parsimony pressure and double tournaments.

Parsimony pressure subtracts a value based on the size of the program tree from the individual's fitness, this value does not necessarily need to be linear. %CONSIDER phrasing here
\cite{parsimony_pressure}

Double tournaments can be used for parent selection as an extension of regular tournament selection described in Section \ref{tournament}.
It has been shown that the order of a double tournament has no significant bearing on the end result. [cite, practical?]

%Several recent papers discuss this issue and propose methods for tackling it, parsimony pressure above and..
\cite{multi_objective_bloat}

% Ongoing work into this may be interesting to talk about!

\subsection{Variation Operators}
\subsubsection{Mutation}
Mutation is the operator that adds the novel, 'off-the-wall' ideas into the population. Without it, genes would only be shuffled around.. %why is this bad..
A trade-off is required here, too much mutation will result in a highly unstable algorithm. Far too much mutation would %move this to calibration section perhaps?
Care needs to be taken when implementing mutation so as not to create biases. This is particularly the case with real-valued mutation.. %which is not being used in this project?
%How to prevent biases?

\subsubsection{Recombination}
%Crossover- 
%IF GA, is this fixed point crossover??

%multipoint crossover, uniform crossover, no crossover?


\subsubsection{Termination Condition}
%Certain number of generations? - consistent across runs
%Certain fitness level? - guarantees a good solution

\section{Results} %Results.. [35 marks]
% Use your evolutionary algorithm to find as good a solution as possible. Evaluate your
% snake(s) and your algorithm and use appropriate statistical methods in your reporting.

%randomness can cause odd results! we need to run multiple times, 30 replicates should be enough to get a broad idea of the evolutionary trends
%large numbers of runs can produce results that are significant but not important

%In order to evaluate we need to compare it with a control
%designing controls can be difficult, they may be subject to: placebo effect & observer effect

% USE A NULL HYPOTHESIS!!
%Non-parametric tests DO NOT require a distribution to be normal and should be the default choice, rank sum test??

%SEE Discovering Statistics using R

%COMPARE to Blog and Paper?

\subsection{Calibration}
% Describe how appropriate values for crossover and mutation were chosen to evolve the best agents,

\section{Conclusion} %[10 marks]
% Well written and clear
\subsection{Main Findings}
% Summarizes findings well and highlights key points
% Connects well with the literature and provides relevant references
% Demonstrates critical ability
% Provides good suggestions for future work


%Has DEAP proved a good tool for this task?
%pros/cons?

\subsection{Further Work}
The complexity and diversity of the snake game can lead into plenty of areas for further exploration. Recent developments in evolutionary computation such as co-evolution and neuroevolution could be explored in the context of this task. With co-evolution individuals would have to compete in order to get to the food items first, creating snake players that find the food faster.
\\\\
Future work could also explore the adaptability of this program to perform well across the wide number of variants of the game that exist with different formats and rules. This could be further expanded to attempt to create individuals that generalise across multiple game variants and carry their learning across in the way a human player would.

\newpage
\raggedright
\bibliography{Report}{}
\bibliographystyle{ieeetran}

\newpage
\section{Appendix}

\begin{figure}[h]
\centering
\begin{subfigure}{0.4\textwidth}
\centering
\includegraphics[width=0.5\textwidth]{game_board_1}
\label{fig:game_board_1}
\end{subfigure}%
\begin{subfigure}{0.4\textwidth}
\centering
\includegraphics[width=0.5\textwidth]{game_board_2}
\label{fig:game_board_2}
\end{subfigure}

\caption{The 14x14 Game Board}
\label{fig:game_board}
\end{figure}
 
\end{document}